 Create PROCEDURE [dbo].[USP_GetPatientQuestionAnswerFor] @QuestionFor INT, @PatientID INT, @AccountType INT AS BEGIN 	SELECT QM.QuestionID,QuestionType,QuestionText,QuestionFor,QuestonSubType,QM.QuestionLinkID, 		QO.ID OptionID,QO.OptionsFor,QO.OptionText,QO.OptionValue,QO.HasChildQuestion, QO.ChildQuestionLinkID, QO.AdditionalInfo, 		PQA.ID, 		PQA.PatientID, 		PQA.AnswerText, 		(CASE WHEN QM.QuestionType = 6 OR QM.QuestionType = 7 -- When Question type is ShortAnswer or LongAnswer then it should be display text as it is saved in answer table. 			THEN PQA.AnswerText  			ELSE (SELECT OptionText FROM Mst_QuestionOptions MQO WHERE MQO.OptionValue = PQA.AnswerText AND MQO.QuestionLinkID = QM.QuestionLinkID)  			END) DisplayAnswerText, 		PQA.IsDeleted 	FROM Mst_Questions QM  	INNER JOIN Mst_QuestionOptions QO ON QM.QuestionLinkID=QO.QuestionLinkID AND QM.AccountTypeId = @AccountType 	LEFT JOIN Trn_PatientQuestionAnswers PQA ON QM.QuestionID = PQA.QuestionID AND PQA.PatientID = @PatientID 	WHERE QuestionFor = @QuestionFor  AND QM.IsDeletedQuestion = 0 END  -- EXEC USP_GetPatientQuestionAnswerFor 3, 16474, 1