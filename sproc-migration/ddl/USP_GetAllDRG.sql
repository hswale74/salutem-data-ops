 CREATE procedure USP_GetAllDRG ( 	@search nvarchar(50) = '',  	@orderBy nvarchar(50) = 'DRGNumber',  	@orderDir varchar(4) = 'asc',  	@StartFrom int = 0,  	@PageSize int = 999999999 ) AS BEGIN 	With DRGResult AS	( 	SELECT 		DR.ID, 		DR.DRGNumber, 		DR.DRGTitle, 		DR.MDC, 		DR.TYPE, 		EN.Discription AS TypeName, 		DR.Weights, 		DR.GeometricMeanLOS, 		DR.ArithmeticMeanLOS, 		DR.UpdatedOn 	FROM Mst_DRG DR 	LEFT JOIN Mst_Enum EN ON DR.TYPE = EN.EnumValue AND EN.EnumType = 'DRGType' 	WHERE DR.Status = 1 	AND ( @search = '' OR (DRGNumber LIKE '%' + @search + '%' OR DRGTitle LIKE '%' + @search + '%')) 	), 	OrderByResult AS (SELECT *, ROW_NUMBER() over (order BY  							case when @orderBy = 'DRGNumber' and @orderDir = 'asc' then DRGNumber end, 							case when @orderBy = 'DRGTitle' and @orderDir = 'desc' then DRGTitle end desc 		) AS RowNumber FROM DRGResult  	)  	SELECT *, (Select Count(ID) FROM DRGResult) TotalRows   	FROM OrderByResult  	WHERE OrderByResult.RowNumber BETWEEN (@StartFrom + 1) AND (@StartFrom  + @pageSize)  END  --exec USP_GetAllDRG 'test','DRGNumber','asc',