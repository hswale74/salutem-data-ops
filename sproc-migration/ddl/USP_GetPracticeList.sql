 Create procedure [dbo].USP_GetPracticeList ( 	@search nvarchar(50) = '',  	@orderBy nvarchar(50) = 'ID',  	@orderDir varchar(4) = 'asc',  	@pageIndex int = 0,  	@pageSize int = 99999 ) AS BEGIN 	SET NOCOUNT ON;  	WITH Result AS ( 		SELECT 	ID,  				PracticeName 		FROM Mst_Practice P with (nolock) 		WHERE PracticeStatus = 1 	),  	OrderByResult AS (SELECT *, 			ROW_NUMBER() over ( 			order BY case when @orderBy = 'PracticeName' and @orderDir = 'asc' then PracticeName end, 								case when @orderBy = 'PracticeName' and @orderDir = 'desc' then PracticeName end desc 			) AS RowNumber FROM Result  	)   	SELECT *, (Select Count(ID) FROM Result) TotalRows   	FROM OrderByResult  	WHERE 		OrderByResult.RowNumber BETWEEN (@pageIndex + 1) AND (@pageIndex  + @pageSize)  END  --exec USP_GetPracticeList  