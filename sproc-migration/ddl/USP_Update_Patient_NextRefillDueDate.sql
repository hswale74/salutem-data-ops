 Create procedure USP_Update_Patient_NextRefillDueDate (@Patient_ID INT) AS  BEGIN 	DECLARE @RowCount INT = 0; 	--Updating Patient's Refill Next Date in Mst_Patient table. 	--It should be next minimum date from active medicine and whose Next Refill date in future. 	Update Mst_Patient SET ReFillDueDate = (Select Min(Refill_Next_Date) Refill_Next_Date  		From Trn_Patient_Med_Dosage WHERE Patient_ID = @Patient_ID AND Refill_Next_Date > GETDATE()  			AND ISNULL(Patient_Dosage_Prescribed_Status, 1) = 1 --Getting next minimum date from active medicine only. 	 ) FROM Mst_Patient WHERE Patient_ID= @Patient_ID  	 	SELECT @RowCount = @@ROWCOUNT 	SELECT @RowCount END -- Exec USP_Update_Patient_NextRefillDueDate 28 